

<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HackStack Posts</title>
  <meta name="description" content="OpenStack and other hackish things">
  <meta name="author" content="dtroyer">

  <link rel="alternate" type="application/rss+xml" title="RSS 2.0"
        href="/x/blog/feed/">
  <link rel="alternate" type="application/atom+xml" title="Atom 1.0"
        href="/x/blog/feed/atom/">

  <link rel="shortcut icon" href="/x/favicon.ico">
  <link rel="apple-touch-icon"
        href="/x/img/apple-touch-icon.png">

  <link rel="stylesheet" href="/x/css/base.css?v=1">
  <link rel="stylesheet" href="/x/css/grid.css?v=1">
  <link rel="stylesheet" media="handheld"
        href="/x/css/handheld.css?v=1">
  <link rel="stylesheet"
        href="/x/css/pygments_murphy.css">

  <script
    src="/x/js/libs/modernizr-1.7.min.js">
  </script>

  <link rel="stylesheet" href="/x/themes/theme1/style.css?v=1">
<link href='http://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Quantico' rel='stylesheet' type='text/css'>


</head>
  <body>
    <div id="container" class="container container_12">
      <div id="main" role="main">
        <div id="main_block">
          <header>
  <div id="header" class="header_gradient theme_font">
    <h1>
      <a href="/x/">
        HackStack Posts
      </a>
    </h1>
    <h2>OpenStack and other hackish things</h2>
  </div>
  <div id="navigation" class="grid_12">
    
    
    <ul class="theme_font">
      <li>
        
        <a href="/x/" class="">Home</a>
      </li>
      <li>
        
        <a href="/x/blog" class="selected">Blog</a>
      </li>
      <li>
        
        <a href="/x/blog/archive/" class="">Archives</a>
      </li>
    </ul>
  </div>
</header>

          <div id="prose_block" class="grid_11">
            




<article>
  <div class="blog_post">
    <header>
      <div id="real-world-devstack-configuration"></div>
      <h1 class="blog_post_title"><a href="/x/blog/2015/02/11/real-world-devstack-configuration/" rel="bookmark" title="Permanent Link to Real World DevStack Configuration">Real World DevStack Configuration</a></h1>
      <p><small><span class="blog_post_date">February 11, 2015 at 03:02 PM</span> | categories: 
        <span class="blog_post_categories"><a href='/x/blog/category/devstack/'>devstack</a></span>
      </small></p>
    </header>
    <div class="post_prose">
      
<div class="document">
<p>Configuring DevStack for development use is a trail of Google searches and
devstack.org reading and all sorts of things.  In my experience, the best and hardest
source of what to do is experience.  And we all know how experience is the bridge
between Bad Judgement and Good Judgement.[]</p>
<div class="section" id="local-conf">
<h1>local.conf</h1>
<p>This is DevStack's configuration file.  It will never be modified by DevStack.</p>
<div class="section" id="localrc">
<h2>localrc</h2>
<p>Now just a section in local.conf, <tt class="docutils literal">localrc</tt> used to be the main config file.
References to it should be mentally translated to <tt class="docutils literal">local.conf [[local|localrc]]</tt>
section.</p>
<p>I also tend to carry a number of config bits commented out to make changing quick.
I'll leave those in to illustrate alternatives to my defaults.</p>
<div class="section" id="logging">
<h3>Logging</h3>
<pre class="literal-block">
LOGDIR=$DEST/logs
LOGFILE=$LOGDIR/stack.sh.log  # why didn't bare name work???
</pre>
<p>The logging support has been recently revamped to use a more conventional
configuration.  <tt class="docutils literal">LOGDIR</tt> will default to <tt class="docutils literal">$DEST/logs</tt> and all log
files will be found here.  <tt class="docutils literal">LOGFILE</tt> will be honored as always, putting
the stack.sh trace log in that location; if <tt class="docutils literal">LOGFILE</tt> does not include
a path, it becomes <tt class="docutils literal"><span class="pre">$LOGDIR/$LOGFILE</span></tt>.</p>
<p>The services logs (aka screen logs) no longer default to a screen-specific
subdirectory, unless <tt class="docutils literal">SCREEN_LOGDIR</tt> is set.  It is deprecated and will be
removed in the future.</p>
</div>
<div class="section" id="network-addressing">
<h3>Network Addressing</h3>
<pre class="literal-block">
FIXED_RANGE=10.254.1.0/24
</pre>
<p>Set <tt class="docutils literal">FIXED_RANGE</tt> away from the default <tt class="docutils literal">10.0.0.0/24</tt> because, well, many
clouds use 10/8 for various things and some of them start at the beginning.
Running DevStack in a cloud VM requires that the DevStack network addresses do
not overlap with the host cloud networks.  Pick a range that isn't at the top
or the bottom to (slightly) reduce the chances of collision.  This is safe for
the neighborhoods I cloud in.</p>
</div>
<div class="section" id="services">
<h3>Services</h3>
<p>For my normal workflow, I want debugging bits enabled and services I am not using disabled.</p>
<pre class="literal-block">
enable_service dstat
disable_service h-eng h-api h-api-cfn h-api-cw
disable_service horizon
#enable_service s-proxy s-object s-container s-account
</pre>
<p>I typically don't use Heat or Horizon, you know, being the CLI guy and all.
Swift is not added by default because it takes a toll on memory use, my laptop
is not well-endowed in that area so 2G VMs are necessary whenever possible.  In
the cloud VMs this is not an issue.</p>
</div>
<div class="section" id="neutron">
<h3>Neutron</h3>
<pre class="literal-block">
# Nova Net
enable_service n-net
disable_Service q-svc q-agt q-dhcp q-l3 q-meta

# Neutron
# NETWORK_GATEWAY must be in the FIXED_RANGE network
#NETWORK_GATEWAY=10.254.1.1
#disable_service n-net
#enable_service q-svc q-agt q-dhcp q-l3 q-meta
</pre>
<p>Neutron may or may not be the default in DevStack by the time you read this,
I've stopped taking chances, I want to know what I get, which by default is
Nova Net for as long as possible, again mostly for memory and complexity reasons.</p>
<p>Note that Neutron in the default config requires <tt class="docutils literal">NETWORK_GATEWAY</tt> to be set
inside the network defined by <tt class="docutils literal">FIXED_RANGE</tt>.  Nova Net does not require this,
although it is mostly harmless to define anyway.</p>
</div>
<div class="section" id="legacy-nova-bits">
<h3>Legacy Nova Bits</h3>
<pre class="literal-block">
disable_service n-obj n-crt
</pre>
<p><tt class="docutils literal"><span class="pre">n-obj</span></tt> is the Nova Object Service, left over from the euca2ools bundle command's
need of an S3 service.  That's it.  Same with <tt class="docutils literal"><span class="pre">n-crt</span></tt>.  They should be removed
as defaults soon if not already.</p>
</div>
</div>
<div class="section" id="nova-conf">
<h2>nova.conf</h2>
<p>Set values here via <tt class="docutils literal">local.conf</tt>:</p>
<pre class="literal-block">
[[post-config|$NOVA_CONF]]
[DEFAULT]
api_rate_limit = False
</pre>
<p>Rate limiting can be a problem during testing, nuke it.</p>
</div>
</div>
</div>


    </div>
  </div>
</article>




          </div>
          <div id="sidebar" class="grid_1">
            <aside>
  <section>
<!--
    <h1 class="post_header_gradient theme_font">Latest Posts</h1>
    <ul>
      <li><a href="/x/blog/2016/02/16/layers-redux/">Layers Redux</a></li>
      <li><a href="/x/blog/2015/04/30/client-cloud-configuration/">Client Cloud Configuration</a></li>
      <li><a href="/x/blog/2015/04/18/openstackclient-is-three-and-official/">OpenStackClient Is Three and Official</a></li>
      <li><a href="/x/blog/2015/03/30/qa-code-sprint/">QA Code Sprint</a></li>
      <li><a href="/x/blog/2015/03/08/plug-in-to-openstackclient/">Plug In To OpenStackClient</a></li>
    </ul>
-->
  </section>
<!--
  <section>
    <h1 class="post_header_gradient theme_font">From Twitter "example"</h1>
    <div id="on_twitter">
      <div id="tweets"></div>
      <a href="http://search.twitter.com/search?q=example" style="float: right">See more tweets</a>
    </div>
  </section>
-->
</aside>

          </div>
          <div class="clear"></div>
        </div>
      </div>
      
<footer>
  <div id="footer" class="grid_12">
    <div class="grid_8">
      <p>
        <a href="/x/blog/feed/index.xml">RSS</a>
      </p>
    </div>
    <div class="grid_4" id="credits">
      <p>
        Copyright 2016
        dtroyer
      </p>
      <p>
        Powered by <a href="http://www.blogofile.com">Blogofile</a>
      </p>
    </div>
  </div>
</footer>

    </div>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/js/libs/jquery-1.5.1.min.js"%3E%3C/script%3E'))</script>
  <script src="/x/js/plugins.js"></script>
  <script src="/x/js/script.js"></script>
  <script src="/x/js/jquery.tweet.js"></script>  
  <script src="/x/js/site.js"></script>
  <!--[if lt IE 7 ]>
  <script src="js/libs/dd_belatedpng.js"></script>
  <script> DD_belatedPNG.fix('img, .png_bg');</script>
  <![endif]-->
  <script>
      var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
      (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
      g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
      s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>

  </body>
</html>






